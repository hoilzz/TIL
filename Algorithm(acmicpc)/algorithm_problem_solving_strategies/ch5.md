# CH 5 알고리즘의 정당성 증명

간단할 때는 직관적으로 알고리즘 설계 가능하지만, 복잡해지면 **이 알고리즘이 과연 문제를 제대로 해결하는지 파악하기 어렵다.** 단위테스트를 이용하여 알고리즘이 문제가 있음을 증명할 수 있다. 하지만 문제가 없음을 증명할 수 없다. 따라서 알고리즘의 정확한 증명을 위해 수학적인 기법이 필요하다.

증명을 위해, 프로그램의 정당성을 판단하기 위해 흔히 사용하는 기법을 알아보자.

그러기 전에 증명을 공부해야 하는 **이유**를 알아보자. **많은 경우 증명이 알고리즘을 유도하는데 결정적인 통찰을 담고 있다.**

- 외우기만 해서 알고리즘을 제대로 이해했다고 할 수 없다.
- 알고리즘 증명을 공부하다 보면 자신이 설계한 알고리즘의 정당성을 더 쉽게 증명할 수 있다.
- 처음 보는 알고리즘이 과연 잘 동작할지, 그것을 어떻게 증명할지 직관이 생긴다.

## 5.2 수학적 귀납법과 반복문 불변식

100개의 도미노가 있을 때,

- 첫번쨰 도미노는 손으로 밀어서 쓰러뜨린다.
- 한 도미노가 쓰러지면 다음 도미노 역시 반드시 쓰러진다.

수학적 귀납법은 도미노와 같이 반복적인 구조를 갖는 명제들을 증명하는데 유용하게 사용되는 증명 기법이다. 귀납법 증명은 3가지로 나뉜다.

1. 단계나누기 : 증명하고 싶은 사실을 여러 단계로 나누기
1. 첫 단계 증명 : 첫 단계에서 증명하고 싶은 내용이 성립함을 보인다.
1. 귀납 증명 : 첫 단계가 증명될 경우, 다음 단계에서도 성립함을 보인다.

> 사다리 게임에서, 1:1 대응이 되는 것을 귀납법을 이용하여 증명하자.
> 1. 단계 나누기 : 텅 빈 N개의 세로줄에서부터 시작해서 사다리가 될 때까지 하나씩 가로줄을 그어간다고 하자. 이 때 가로줄을 하나 긋는 것을 1단계라고 한다.
> 2. 첫 단계 증명 : 텅 빈 N개의 세로줄 에서는 항상 맨 위 선택지와 맨 아래 선택지가 1:1대응이 된다.
> 3. 귀납 증명 : 가로줄을 그어서 두 개의 세로줄을 연결 했다고 하자. 이 때 결과는 바뀐다. 하지만 결과가 바껴도 1:1 대응은 변하지 않는다.(이것을 불변식이라고 한다.)


### 반복문 불변식

귀납법을 이용하여 알고리즘의 정당성 증명시, 반복문 불변식이라는 개념이 쓰인다. 반복문 불변식이란 반복문의 내용이 실행될 때마다 변하지 않고 성립되는 것이다.

1. 반복문 진입시에 불변식이 성립한다.
2. 반복문 내용이 불변식을 꺠뜨리지 않음을 보인다. 반복문 시작부터 끝까지 항상 성립함을 보인다.
3. 반복문 종료 후에도 불변식이 성립하면 알고리즘 정당성을 보일 수 있다.

### 이진 탐색과 반복문 불변식

```C
// 필수 조건: A는 오름차순으로 정렬되어있다.
// 결과 : A[i-1] < x <= A[i] 인 i를 반환한다.
int bSearch(const vector<int>& A, int x) {
    int n = A.size();
    int lo = -1, hi = n;

    // 불변식 1: lo < hi;
    // 불변식 : A[lo] < x <= A[hi]
    while(lo  + 1 < hi) {
        int mid = (lo + hi) / 2;
        if(A[mid] < x) {
            lo = mid;
        } else {
            hi = mid;
        }
        //불변식은 여기서도 성립해야 한다.
    }
    return hi;
}
```

이진 탐색 내부의 while문은 2개의 불변식을 유지한다.

- 불변식 1: while문 내부로 들어왔다는 말은 hi와 lo 차이가 2 이상이라는 의미다. mid는 항상 두 값 사이에 위치한다. 따라서 mid 를 lo, hi 둘 다 어디에 대입하건 불변식 1은 유지된다.

- 불변식 2
    - A[j+1 ~ i]의 모든 원소는 A[j]보다 크다.
    - A[0 ~ i]의 원소는 A[j]를 제외하고 모두 정렬되어있다.

## 5.3 귀류법

명제의 부정을 전제로 하여 결론을 이끌어내는 것이다. 즉, 모순이 발생함을 보여 명제가 참인 것을 증명하는 방법이다.

### 구성적 증명

1. 답을 제시한다
2. 답이 적용된 실제 예시를 든다.
3. 답을 만드는 방법을 제시한다.

> 예시 - 하늘을 나는 교통수단이 있다.
> 비구성적 증명: 과학적 증명을 통해.. 양력의 법칙 등
> 구성적 증명: 비행기를 만들어서 보여준다. 비행기 제작 설계 도면 제공 등


## summary

귀납법
- 첫 단계 증명 + 귀납 증명(n->n+1)
- 반복문 불변식

귀류법
- 반대 상황을 가정 -> 결론이 잘못됨
