# js-main-threaded-dissected

JS engine이 브라우저 내에서 통합되는 방식의 개요다. 이 정보는 주로 크롬과 V8엔진과 관련된 정보다. 이 정보는 다른 브라우저와 마이너한 차이점이 있을 수 있다.

메인 스레드를 이해하는 것은 동시성, 시간 관련, 비동기 작업을 핸들링하고 디버깅하기 위해 중요하다.(넓게는 모던 자바스크립트 프레임워크와 라이브러리를 이용할 때)

JS는 싱글 스레드다. 그러므로 병렬 작업을 위해 여러 CPU 코어에서 계산을 분산하기 위해 새로운 스레드를 생성할 수 없다.

이것은 동시성 문제에 대해 걱정할 필요가 없으며 간단한 펭지와 일반적인 작업에 대해 잘 수행되기 떄문에 좋다. 하지만 만약 복잡하고 이미지 변형 혹은 hard math client side와 같은 CPU-heavy stuff를 해야한다면, multiple thread를 갖는 것이 계산하는 동안 UI가 block되지 않기 위해 좋을 것이다.

UI 업데이트와 인터랙션은 동일한 메인 스레드에서 처리된다. 따라서 만약 긴 수행 시간을 갖는다면 (예를 들어 계산하기 위해 10초 이상이 필요로하는 이미지 변형), 너는 10초 동안 UI 응답(JS animation, clicks, inputs, typing, etc.)을 블로킹한다. 그러면 브라우저는 action을 취하기 위해 결정할 수 있고 user에게 process를 죽일지, 실행을 유지할지 물어보는 popup을 보여준다.

## Creating non-blocking UIs

이 문제에 몇가지 해결방법이 있다. UI를 블록킹하지 않으면서 긴 수행시간을 가진 스크립트를 실행하기 위해 너가 할 수 있는 것을 보자.

1. WebWorker 생성하기
2. long-task를 작은 sub-task로 쪼개고 비동기로 실행하기

이 방식은 sub task와 다음 task사이에서 메인 스레드는 다른 것을 할 기회를 가진다. (UI 업데이트 같은거..) 이것을 하기 위해 setTimeout를 이용할 수 있다.