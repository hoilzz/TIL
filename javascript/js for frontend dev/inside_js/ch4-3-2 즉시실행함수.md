# 4.3.2 즉시 실행 함수

함수 정의와 동시에 바로 실행하는 함수다.

익명 함수를 응용한 형태다.

```javascript
(function(name){
	console.log('This is the immediate function ->' + name);
})
```

즉시 실행함수를 만드는 방법은 간단하다.

	- 함수 리터럴을 괄호로 둘러싼다.
		- 함수의 이름이 있든 없든 상관없다.
	- 함수가 바로 호출될 수 있게 `()` 괄호쌍을 정의부 바로 뒤에 추가한다.

이렇게 함수가 선언되자마자 실행되게 만든 즉시 실행 함수의 경우,

같은 함수를 다시 호출할 수 없다.

따라서, 즉시 실행 함수의 이러한 특징 이용시, **최초 한 번의 실행만을 필요로 하는 초기화 코드** 부분에 사용할 수 있다.

---

또 다른 용도를 알아보자.

jQuery와 같은 라이브러리나 프레임워크 소스들에서 사용될 수 있다.

jQuery의 최신 소스 코드를 살펴보면 소스의 시작부분과 끝 부분이 다음 예제와 같이 즉시 실행 함수 형태로 구성되어 있음을 알 수 있다.

즉, jQuery 소스 코드 전체가 즉시 실행 함수로 감싸져 있다.

```javascript
(function(window, undefined){
	...
})(window);
```

jQuery에서 즉시 실행 함수를 사용하는 이유는 JS의 변수 유효 범위 특성 때문이다.

따라서 라이브러리 코드를 즉시 실행 함수 내부에 정의하면,

라이브러리 내의 변수들은 함수 외부에서 접근 불가능하다.

따라서, 즉시 실행 함수 내에 라이브러리 코드를 추가하여,

전역 네임스페이스를 더럽히지 않을 수 있다.

이후, 다른 JS 라이브러리들이 동시에 로드가 되더라도 라이브러리 간 변수 이름 충돌 같은 문제를 방지할 수 있다.

> 즉시 실행 함수 패턴
즉시 실행 함수는 라이브러리 코드가 로드되면 실행되는 `초기화` 작업시 많이 사용된다. jQuery외에도 대부분의 라이브러리가 이와 같은 방식이다.
다음은 유명 라이브러리의 초기화 코드다.

*Underscore 1.3.3*
```javascript
(function(){
	var root = this;
	var previousUnderscore = root._;

	var _ = function(obj){return new wrapper(obj);}
	...

	root['_'] = _;

	...
}).call(this);
```

Underscore 1.3.3은 call 함수를 this 인자와 함께 사용했다.

**이렇게 넘긴 this가 `즉시 실행 함수 내부의 this`에 바인딩** 된다.

물론 이것도 전역 객체다. 함수 내부에서 root라는 이름으로 사용된다.


## summary

- 최초 한번의 실행만을 필요로하는 초기화 코드
- 라이브러리나 프레임워크 소스들에서 사용.
	- JS의 변수 유효 범위 특성 때문이다.
	- 즉시 실행 함수에 라이브러리 코드 추가하면, 전역 네임스페이스 더럽히지 않을 수 있다.
	- 즉, 다른 JS 라이브러리들과 동시에 로드 되더라도 변수 이름 충돌 문제를 피할 수 있다.
